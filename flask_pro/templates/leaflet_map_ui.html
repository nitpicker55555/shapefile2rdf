<!DOCTYPE html>
<html>
<head>
    <title>Leaflet GeoJSON Toggle with UI Effects</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <!-- 引入 Leaflet.markercluster CSS 和 JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <!--<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />-->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    <style>
        body, html {
            height: 100%; /* Make sure the body and html fill the height */
            margin: 0;    /* Remove default margin */
            padding: 0;   /* Remove default padding */
            overflow: hidden; /* Prevent scrollbars from appearing */
        }
        #map-container {
            position: absolute; /* 或者使用 position: fixed; 根据需要 */
            bottom: 100px; /* 距离窗口底部100px */
            /*left: 20px; !* 距离窗口左边缘50px *!*/
            right: 20px; /* 距离窗口右边缘50px */
            width: 600px;
            height: 500px; /* 高度为600px */
            background-color: #f0f0f0; /* 背景色，仅作为示例 */
            font-size: small;

        }
        .block-button {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background-color: grey;
            color: white;
            border: none;
            border-radius: 15px;
            opacity: 0.7;
            text-align: center;
            cursor: pointer;
            transition: background-color 1s;
        }

        .block-button:hover {
            background-color: black;
            opacity: 1.0;
        }

        .leaflet-control-custom {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            /*border: 1px solid #fff;*/
            backdrop-filter: blur(10px);
            width: 200px;
            overflow: hidden;
            transition: top 0.3s ease-in-out;
            position: absolute ;
            top: 50px; /* Initial top position below toggle */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow */
            max-height: 500px;
            left: 10px;

            overflow-y: auto;

        }
        .leaflet-control-toggle {
            top:10px;
            left: 10px;

            padding: 5px;
            border: none;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            backdrop-filter: blur(10px);
            cursor: pointer;
            width: 200px; /* Same width as controls */
            /*text-align: center;*/
            position: absolute;

            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow */
            z-index: 999;

        }
        .toggle-btn {
            margin: 5px 0;
            padding: 5px;
            width: calc(100% - 10px);
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            cursor: pointer;
            color: white;
            font-size: medium;
        }
        .fullscreen {
            width: 100% !important;
            height: 100vh !important;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 999;
            margin: 0 !important;    /* No margin */
            padding: 0 !important;   /* No padding */
        }
        .custom-cluster-icon {
            border-radius: 50%;
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            font-size: 14px;
        }
    </style>
</head>
<body>
<div id="map-container"></div>
<div id="controls">
<!--    <button id="toggle">&#x2190;</button>-->
</div>
<!--<button id="expandBtn">Expand</button>-->

<script>
    var map = L.map('map-container', {
        doubleClickZoom: false,
        zoomControl: false // Disable the zoom control
    }).setView([48.145, 11.550], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        opacity: 0.3  // 设置透明度为50%
        // attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // GeoJSON data setup as earlier
    var geojsons={
        "Munich Maxvorstadt": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.538923,
                        48.139603
                    ],
                    [
                        11.538923,
                        48.157637
                    ],
                    [
                        11.588192,
                        48.157637
                    ],
                    [
                        11.588192,
                        48.139603
                    ],
                    [
                        11.538923,
                        48.139603
                    ]
                ]
            ]
        },
        "points_university_Hochschule Macromedia_6029489006": {
            "type": "Point",
            "coordinates": [
                11.55502,
                48.1473605
            ]
        },
        "points_university_Fakultät für Physik_283031238": {
            "type": "Point",
            "coordinates": [
                11.5795225,
                48.1494272
            ]
        },
        "land_university_Technische Universität München_144291476": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5656093,
                        48.148364
                    ],
                    [
                        11.5657029,
                        48.148511
                    ],
                    [
                        11.5657401,
                        48.1485693
                    ],
                    [
                        11.5658047,
                        48.1486701
                    ],
                    [
                        11.56583,
                        48.14871
                    ],
                    [
                        11.5658378,
                        48.1487224
                    ],
                    [
                        11.5658474,
                        48.1487375
                    ],
                    [
                        11.5658704,
                        48.148775
                    ],
                    [
                        11.565895,
                        48.1488139
                    ],
                    [
                        11.5659161,
                        48.1488474
                    ],
                    [
                        11.5659625,
                        48.1489199
                    ],
                    [
                        11.5661575,
                        48.1492256
                    ],
                    [
                        11.5663219,
                        48.1494835
                    ],
                    [
                        11.5668435,
                        48.1503018
                    ],
                    [
                        11.5669648,
                        48.150445
                    ],
                    [
                        11.5672398,
                        48.1508937
                    ],
                    [
                        11.567246,
                        48.1508921
                    ],
                    [
                        11.5675778,
                        48.1514056
                    ],
                    [
                        11.5699075,
                        48.1507533
                    ],
                    [
                        11.5692759,
                        48.1497984
                    ],
                    [
                        11.5691847,
                        48.1496256
                    ],
                    [
                        11.5685746,
                        48.1486751
                    ],
                    [
                        11.5682988,
                        48.1482605
                    ],
                    [
                        11.5681022,
                        48.1479519
                    ],
                    [
                        11.567951,
                        48.1477229
                    ],
                    [
                        11.5674609,
                        48.1478551
                    ],
                    [
                        11.5674307,
                        48.1478632
                    ],
                    [
                        11.5673632,
                        48.147747
                    ],
                    [
                        11.5672535,
                        48.1475648
                    ],
                    [
                        11.5677814,
                        48.1474234
                    ],
                    [
                        11.5675015,
                        48.1470055
                    ],
                    [
                        11.5663313,
                        48.1473349
                    ],
                    [
                        11.5665599,
                        48.1476835
                    ],
                    [
                        11.566602,
                        48.1477522
                    ],
                    [
                        11.5667458,
                        48.1477128
                    ],
                    [
                        11.566837,
                        48.1478653
                    ],
                    [
                        11.5669137,
                        48.1479939
                    ],
                    [
                        11.5656093,
                        48.148364
                    ]
                ]
            ]
        },
        "land_university_Hochschule für Philosophie_83065809": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5824023,
                        48.148921
                    ],
                    [
                        11.5824777,
                        48.1491888
                    ],
                    [
                        11.5826796,
                        48.1491635
                    ],
                    [
                        11.5826335,
                        48.1489999
                    ],
                    [
                        11.5827595,
                        48.1489841
                    ],
                    [
                        11.5827296,
                        48.1488779
                    ],
                    [
                        11.5828301,
                        48.1488653
                    ],
                    [
                        11.5828637,
                        48.1489843
                    ],
                    [
                        11.5828267,
                        48.148989
                    ],
                    [
                        11.5828338,
                        48.1490142
                    ],
                    [
                        11.5827712,
                        48.1490221
                    ],
                    [
                        11.582802,
                        48.1491316
                    ],
                    [
                        11.5835636,
                        48.149036
                    ],
                    [
                        11.5835011,
                        48.1488144
                    ],
                    [
                        11.5834724,
                        48.1487123
                    ],
                    [
                        11.5834669,
                        48.1486929
                    ],
                    [
                        11.5831607,
                        48.1487316
                    ],
                    [
                        11.5831432,
                        48.1487506
                    ],
                    [
                        11.5831698,
                        48.148845
                    ],
                    [
                        11.5831924,
                        48.1488622
                    ],
                    [
                        11.5832065,
                        48.1488605
                    ],
                    [
                        11.5832251,
                        48.1489265
                    ],
                    [
                        11.5831813,
                        48.1489614
                    ],
                    [
                        11.5831044,
                        48.1489711
                    ],
                    [
                        11.5830374,
                        48.1489394
                    ],
                    [
                        11.5829861,
                        48.1487573
                    ],
                    [
                        11.5828172,
                        48.1487785
                    ],
                    [
                        11.5825816,
                        48.148808
                    ],
                    [
                        11.5826063,
                        48.1488954
                    ],
                    [
                        11.5824023,
                        48.148921
                    ]
                ]
            ]
        },
        "land_university_Fakultät für Informatik der LMU_115881074": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5756449,
                        48.1470099
                    ],
                    [
                        11.5757394,
                        48.147153
                    ],
                    [
                        11.5757633,
                        48.147146
                    ],
                    [
                        11.5758295,
                        48.1471258
                    ],
                    [
                        11.5759988,
                        48.1470761
                    ],
                    [
                        11.5761937,
                        48.1470188
                    ],
                    [
                        11.5761477,
                        48.146949
                    ],
                    [
                        11.5760997,
                        48.1468763
                    ],
                    [
                        11.5759036,
                        48.1469339
                    ],
                    [
                        11.5757392,
                        48.1469822
                    ],
                    [
                        11.5756449,
                        48.1470099
                    ]
                ]
            ]
        },
        "points_university_Institut für Statistik, Ludwig Maximilians Universität, München_7080823087": {
            "type": "Point",
            "coordinates": [
                11.581535,
                48.1521649
            ]
        },
        "points_university_Rachel Carson Center for Environment and Society_994492350": {
            "type": "Point",
            "coordinates": [
                11.5828079,
                48.1550515
            ]
        },
        "land_university_Ludwig-Maximilians Universität München - Institut für Soziologie_665494450": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5769477,
                        48.1557851
                    ],
                    [
                        11.5772388,
                        48.1557941
                    ],
                    [
                        11.5773108,
                        48.1557935
                    ],
                    [
                        11.5772322,
                        48.1554758
                    ],
                    [
                        11.576964,
                        48.1555033
                    ],
                    [
                        11.5769592,
                        48.1556199
                    ],
                    [
                        11.5769477,
                        48.1557851
                    ]
                ]
            ]
        },
        "land_university_Hochschule München Campus Karlstraße_346311426": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5684607,
                        48.1433604
                    ],
                    [
                        11.5684715,
                        48.1433769
                    ],
                    [
                        11.5684823,
                        48.1433933
                    ],
                    [
                        11.5685039,
                        48.143387
                    ],
                    [
                        11.5684824,
                        48.1433541
                    ],
                    [
                        11.5684607,
                        48.1433604
                    ]
                ]
            ]
        },
        "points_university_TUM Sprachenzentrum_9828814305": {
            "type": "Point",
            "coordinates": [
                11.5632336,
                48.1471226
            ]
        },
        "land_university_Ludwig-Maximilians-Universität_82672176": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5782151,
                        48.1497096
                    ],
                    [
                        11.5785229,
                        48.150197
                    ],
                    [
                        11.5786434,
                        48.1503969
                    ],
                    [
                        11.5788796,
                        48.1507683
                    ],
                    [
                        11.5793355,
                        48.1514985
                    ],
                    [
                        11.5795469,
                        48.1518372
                    ],
                    [
                        11.5797376,
                        48.1517839
                    ],
                    [
                        11.5799331,
                        48.1517284
                    ],
                    [
                        11.5798988,
                        48.1516769
                    ],
                    [
                        11.5806351,
                        48.1514676
                    ],
                    [
                        11.5806431,
                        48.1514841
                    ],
                    [
                        11.5813069,
                        48.1513407
                    ],
                    [
                        11.5813847,
                        48.1513239
                    ],
                    [
                        11.5813472,
                        48.1512466
                    ],
                    [
                        11.5813163,
                        48.1511827
                    ],
                    [
                        11.5812136,
                        48.1509682
                    ],
                    [
                        11.5810953,
                        48.1507211
                    ],
                    [
                        11.581034,
                        48.1505932
                    ],
                    [
                        11.5810155,
                        48.1505546
                    ],
                    [
                        11.5808972,
                        48.1503075
                    ],
                    [
                        11.5808069,
                        48.1501189
                    ],
                    [
                        11.5806711,
                        48.1498335
                    ],
                    [
                        11.5805167,
                        48.1495127
                    ],
                    [
                        11.5804867,
                        48.1494533
                    ],
                    [
                        11.5803281,
                        48.1491346
                    ],
                    [
                        11.5784641,
                        48.1496404
                    ],
                    [
                        11.5782151,
                        48.1497096
                    ]
                ]
            ]
        },
        "land_university_Nano-Institut der Ludwig-Maximilians-Universität München_355483076": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5853803,
                        48.1514839
                    ],
                    [
                        11.5854685,
                        48.1516818
                    ],
                    [
                        11.5856088,
                        48.1519989
                    ],
                    [
                        11.5857673,
                        48.1519539
                    ],
                    [
                        11.5858147,
                        48.1520035
                    ],
                    [
                        11.5860778,
                        48.1518829
                    ],
                    [
                        11.5863726,
                        48.1517684
                    ],
                    [
                        11.5861757,
                        48.1515078
                    ],
                    [
                        11.5859284,
                        48.1515632
                    ],
                    [
                        11.5858297,
                        48.1513778
                    ],
                    [
                        11.5853803,
                        48.1514839
                    ]
                ]
            ]
        },
        "land_university_Veterinärmedizinisches Institut der Universität München_34103150": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5846742,
                        48.1501828
                    ],
                    [
                        11.5847446,
                        48.1503693
                    ],
                    [
                        11.585321,
                        48.1513816
                    ],
                    [
                        11.5853803,
                        48.1514839
                    ],
                    [
                        11.5858297,
                        48.1513778
                    ],
                    [
                        11.5859284,
                        48.1515632
                    ],
                    [
                        11.5861757,
                        48.1515078
                    ],
                    [
                        11.5863726,
                        48.1517684
                    ],
                    [
                        11.5860778,
                        48.1518829
                    ],
                    [
                        11.5858147,
                        48.1520035
                    ],
                    [
                        11.5857673,
                        48.1519539
                    ],
                    [
                        11.5856088,
                        48.1519989
                    ],
                    [
                        11.5855509,
                        48.1520183
                    ],
                    [
                        11.585708,
                        48.1522107
                    ],
                    [
                        11.5859676,
                        48.1523767
                    ],
                    [
                        11.5866646,
                        48.1527234
                    ],
                    [
                        11.5869319,
                        48.1526512
                    ],
                    [
                        11.5879918,
                        48.1531182
                    ],
                    [
                        11.5882021,
                        48.152838
                    ],
                    [
                        11.5880231,
                        48.1525818
                    ],
                    [
                        11.5870283,
                        48.151661
                    ],
                    [
                        11.5868508,
                        48.15121
                    ],
                    [
                        11.5861589,
                        48.150115
                    ],
                    [
                        11.5861106,
                        48.1500678
                    ],
                    [
                        11.5860347,
                        48.1500405
                    ],
                    [
                        11.5859434,
                        48.1500407
                    ],
                    [
                        11.5858049,
                        48.1500597
                    ],
                    [
                        11.5853779,
                        48.1501153
                    ],
                    [
                        11.5851871,
                        48.1501378
                    ],
                    [
                        11.5850732,
                        48.1501282
                    ],
                    [
                        11.5846742,
                        48.1501828
                    ]
                ]
            ]
        },
        "points_university_Fakultät für Architektur, Fakultät für Bauingenierwesen, Fakultät für Geoinformation_8285161077": {
            "type": "Point",
            "coordinates": [
                11.5688847,
                48.1427164
            ]
        },
        "points_university_Arnold Sommerfeld Center_5862775989": {
            "type": "Point",
            "coordinates": [
                11.5734693,
                48.1479303
            ]
        },
        "land_university_Hochschule München_10326183": {
            "type": "MultiPolygon",
            "coordinates": [
                [
                    [
                        [
                            11.5517252,
                            48.1541342
                        ],
                        [
                            11.5522574,
                            48.1544282
                        ],
                        [
                            11.5518591,
                            48.1547543
                        ],
                        [
                            11.552046,
                            48.1548563
                        ],
                        [
                            11.5532397,
                            48.1538741
                        ],
                        [
                            11.5534719,
                            48.1539888
                        ],
                        [
                            11.5536587,
                            48.1538524
                        ],
                        [
                            11.5538152,
                            48.1537312
                        ],
                        [
                            11.5541313,
                            48.1534141
                        ],
                        [
                            11.5543505,
                            48.1532616
                        ],
                        [
                            11.5531268,
                            48.1524554
                        ],
                        [
                            11.5529211,
                            48.152586
                        ],
                        [
                            11.5526152,
                            48.1523991
                        ],
                        [
                            11.5523236,
                            48.1526339
                        ],
                        [
                            11.5522513,
                            48.1526936
                        ],
                        [
                            11.5518658,
                            48.1530115
                        ],
                        [
                            11.5517964,
                            48.1530708
                        ],
                        [
                            11.552397,
                            48.1533999
                        ],
                        [
                            11.5524876,
                            48.1534495
                        ],
                        [
                            11.5518857,
                            48.1539901
                        ],
                        [
                            11.5517252,
                            48.1541342
                        ]
                    ]
                ],
                [
                    [
                        [
                            11.5523872,
                            48.1553833
                        ],
                        [
                            11.5527753,
                            48.1556062
                        ],
                        [
                            11.553597,
                            48.1560822
                        ],
                        [
                            11.5541573,
                            48.1556149
                        ],
                        [
                            11.5551458,
                            48.1561125
                        ],
                        [
                            11.5557902,
                            48.1554774
                        ],
                        [
                            11.5558143,
                            48.1554537
                        ],
                        [
                            11.5539342,
                            48.1544546
                        ],
                        [
                            11.5523872,
                            48.1553833
                        ]
                    ]
                ],
                [
                    [
                        [
                            11.5541355,
                            48.154269
                        ],
                        [
                            11.5547496,
                            48.1546035
                        ],
                        [
                            11.5549191,
                            48.154466
                        ],
                        [
                            11.5550952,
                            48.1544014
                        ],
                        [
                            11.5551964,
                            48.1543171
                        ],
                        [
                            11.555767,
                            48.154612
                        ],
                        [
                            11.5553602,
                            48.1549431
                        ],
                        [
                            11.5553585,
                            48.1549705
                        ],
                        [
                            11.5560448,
                            48.1553512
                        ],
                        [
                            11.5570139,
                            48.1546309
                        ],
                        [
                            11.557442,
                            48.1544129
                        ],
                        [
                            11.5578542,
                            48.1542409
                        ],
                        [
                            11.558,
                            48.1541996
                        ],
                        [
                            11.5584059,
                            48.1540824
                        ],
                        [
                            11.5583827,
                            48.1540169
                        ],
                        [
                            11.558319,
                            48.1539846
                        ],
                        [
                            11.5576635,
                            48.1536374
                        ],
                        [
                            11.5570135,
                            48.1532841
                        ],
                        [
                            11.5570068,
                            48.1532896
                        ],
                        [
                            11.5568086,
                            48.1534523
                        ],
                        [
                            11.5564218,
                            48.1532384
                        ],
                        [
                            11.5565468,
                            48.1531339
                        ],
                        [
                            11.5565194,
                            48.1531189
                        ],
                        [
                            11.5563295,
                            48.1530175
                        ],
                        [
                            11.5562866,
                            48.1529946
                        ],
                        [
                            11.5562842,
                            48.1529966
                        ],
                        [
                            11.5562256,
                            48.152966
                        ],
                        [
                            11.556014,
                            48.1531446
                        ],
                        [
                            11.5557882,
                            48.1530274
                        ],
                        [
                            11.5557169,
                            48.1529904
                        ],
                        [
                            11.5541355,
                            48.154269
                        ]
                    ]
                ]
            ]
        },
        "land_university_Hochschule für angewandte Wissenschaften München, Campus Karlstraße_203185653": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5680667,
                        48.1427236
                    ],
                    [
                        11.5686549,
                        48.1437205
                    ],
                    [
                        11.5687209,
                        48.143702
                    ],
                    [
                        11.5688443,
                        48.1436658
                    ],
                    [
                        11.5688654,
                        48.1436738
                    ],
                    [
                        11.5689731,
                        48.1435297
                    ],
                    [
                        11.5689972,
                        48.1434933
                    ],
                    [
                        11.5691366,
                        48.1432825
                    ],
                    [
                        11.5691483,
                        48.1432633
                    ],
                    [
                        11.5693203,
                        48.1430385
                    ],
                    [
                        11.5692814,
                        48.1429792
                    ],
                    [
                        11.5693045,
                        48.1429725
                    ],
                    [
                        11.5692761,
                        48.1429292
                    ],
                    [
                        11.5691967,
                        48.1428081
                    ],
                    [
                        11.5693003,
                        48.1426684
                    ],
                    [
                        11.5693889,
                        48.1425472
                    ],
                    [
                        11.5694283,
                        48.1424963
                    ],
                    [
                        11.5691315,
                        48.1424015
                    ],
                    [
                        11.56908,
                        48.1424067
                    ],
                    [
                        11.5680667,
                        48.1427236
                    ]
                ]
            ]
        },
        "points_university_DGFI-TUM_3414243194": {
            "type": "Point",
            "coordinates": [
                11.5780072,
                48.1413043
            ]
        },
        "land_university_Ludwig-Maximilians-Universität_449701274": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5832029,
                        48.1494266
                    ],
                    [
                        11.5833352,
                        48.1498511
                    ],
                    [
                        11.583425,
                        48.1498954
                    ],
                    [
                        11.5837763,
                        48.1498487
                    ],
                    [
                        11.5838403,
                        48.1498402
                    ],
                    [
                        11.5836809,
                        48.1493379
                    ],
                    [
                        11.5836264,
                        48.1493452
                    ],
                    [
                        11.5834965,
                        48.1493626
                    ],
                    [
                        11.5834437,
                        48.1493697
                    ],
                    [
                        11.5832029,
                        48.1494266
                    ]
                ]
            ]
        },
        "land_university_Ludwig-Maximilians-Universität_117075230": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.581802,
                        48.1510685
                    ],
                    [
                        11.5818406,
                        48.1511523
                    ],
                    [
                        11.5818745,
                        48.1512291
                    ],
                    [
                        11.5819969,
                        48.151203
                    ],
                    [
                        11.582376,
                        48.1520418
                    ],
                    [
                        11.5826427,
                        48.1519881
                    ],
                    [
                        11.5827003,
                        48.1519734
                    ],
                    [
                        11.5826669,
                        48.1518924
                    ],
                    [
                        11.582675,
                        48.1518807
                    ],
                    [
                        11.5827798,
                        48.1518418
                    ],
                    [
                        11.5833178,
                        48.1516314
                    ],
                    [
                        11.583386,
                        48.1516027
                    ],
                    [
                        11.5834522,
                        48.1517078
                    ],
                    [
                        11.5834002,
                        48.1517224
                    ],
                    [
                        11.5834908,
                        48.1519287
                    ],
                    [
                        11.5840303,
                        48.1518349
                    ],
                    [
                        11.5839691,
                        48.1516365
                    ],
                    [
                        11.5838979,
                        48.1516465
                    ],
                    [
                        11.5838853,
                        48.1516057
                    ],
                    [
                        11.5838442,
                        48.1514861
                    ],
                    [
                        11.583498,
                        48.151539
                    ],
                    [
                        11.5833484,
                        48.1515508
                    ],
                    [
                        11.5833272,
                        48.1515201
                    ],
                    [
                        11.5832431,
                        48.1513845
                    ],
                    [
                        11.5831567,
                        48.151152
                    ],
                    [
                        11.583045,
                        48.1508512
                    ],
                    [
                        11.5831306,
                        48.1508398
                    ],
                    [
                        11.5841082,
                        48.1507091
                    ],
                    [
                        11.5840301,
                        48.1504555
                    ],
                    [
                        11.5834057,
                        48.1505448
                    ],
                    [
                        11.5833232,
                        48.1502915
                    ],
                    [
                        11.5830349,
                        48.150336
                    ],
                    [
                        11.5831419,
                        48.150597
                    ],
                    [
                        11.582953,
                        48.1506274
                    ],
                    [
                        11.582929,
                        48.150566
                    ],
                    [
                        11.5829016,
                        48.1504956
                    ],
                    [
                        11.5828511,
                        48.1503826
                    ],
                    [
                        11.5827224,
                        48.1504087
                    ],
                    [
                        11.5824597,
                        48.1504658
                    ],
                    [
                        11.5824097,
                        48.1504767
                    ],
                    [
                        11.5823882,
                        48.1504291
                    ],
                    [
                        11.5821181,
                        48.1504834
                    ],
                    [
                        11.582233,
                        48.1507381
                    ],
                    [
                        11.5823333,
                        48.1509603
                    ],
                    [
                        11.5821912,
                        48.1509892
                    ],
                    [
                        11.581802,
                        48.1510685
                    ]
                ]
            ]
        },
        "points_university_Serlo Education e.V. – Hochschulgruppe der LMU_2557267108": {
            "type": "Point",
            "coordinates": [
                11.5829267,
                48.1566081
            ]
        },
        "points_university_Hochschule für Musik und Theater — Standort Luisenstraße_8143714328": {
            "type": "Point",
            "coordinates": [
                11.5650422,
                48.1481088
            ]
        },
        "land_university_Ludwig-Maximilians-Universität_83065817": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5781601,
                        48.1486025
                    ],
                    [
                        11.5782375,
                        48.1487283
                    ],
                    [
                        11.5782333,
                        48.1487294
                    ],
                    [
                        11.5782895,
                        48.1488204
                    ],
                    [
                        11.5783044,
                        48.1488445
                    ],
                    [
                        11.5782998,
                        48.1488467
                    ],
                    [
                        11.5783115,
                        48.1488647
                    ],
                    [
                        11.5783324,
                        48.1488968
                    ],
                    [
                        11.5783458,
                        48.1489173
                    ],
                    [
                        11.5783909,
                        48.1489863
                    ],
                    [
                        11.5781708,
                        48.1490503
                    ],
                    [
                        11.5783317,
                        48.1493002
                    ],
                    [
                        11.5782395,
                        48.1493836
                    ],
                    [
                        11.5782431,
                        48.1493914
                    ],
                    [
                        11.5783211,
                        48.1495107
                    ],
                    [
                        11.5784653,
                        48.1494688
                    ],
                    [
                        11.5784893,
                        48.1494618
                    ],
                    [
                        11.5785078,
                        48.1494564
                    ],
                    [
                        11.5786681,
                        48.1494097
                    ],
                    [
                        11.5787856,
                        48.1493865
                    ],
                    [
                        11.5789217,
                        48.1493483
                    ],
                    [
                        11.5789968,
                        48.1493272
                    ],
                    [
                        11.5790977,
                        48.1492989
                    ],
                    [
                        11.5794387,
                        48.1492033
                    ],
                    [
                        11.5796016,
                        48.1491576
                    ],
                    [
                        11.5797526,
                        48.1491152
                    ],
                    [
                        11.57998,
                        48.1490624
                    ],
                    [
                        11.5802927,
                        48.1489741
                    ],
                    [
                        11.5800189,
                        48.148406
                    ],
                    [
                        11.5798009,
                        48.1484474
                    ],
                    [
                        11.5796968,
                        48.148468
                    ],
                    [
                        11.5795027,
                        48.1485025
                    ],
                    [
                        11.5794743,
                        48.1484518
                    ],
                    [
                        11.5793568,
                        48.1482699
                    ],
                    [
                        11.5790758,
                        48.1483484
                    ],
                    [
                        11.5790738,
                        48.1483451
                    ],
                    [
                        11.5790293,
                        48.148357
                    ],
                    [
                        11.5790312,
                        48.1483604
                    ],
                    [
                        11.5788507,
                        48.1484044
                    ],
                    [
                        11.5787081,
                        48.1484454
                    ],
                    [
                        11.5785876,
                        48.1484801
                    ],
                    [
                        11.578328,
                        48.1485547
                    ],
                    [
                        11.5782088,
                        48.1485889
                    ],
                    [
                        11.5781601,
                        48.1486025
                    ]
                ]
            ]
        },
        "points_university_Seniorenstudium (LMU)_2513030157": {
            "type": "Point",
            "coordinates": [
                11.5760512,
                48.1566627
            ]
        },
        "land_university_Bayerische Akademie der Wissenschaften_46650528": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5801161,
                        48.1410123
                    ],
                    [
                        11.5802237,
                        48.1412651
                    ],
                    [
                        11.5802336,
                        48.141288
                    ],
                    [
                        11.5803202,
                        48.1414842
                    ],
                    [
                        11.5804017,
                        48.1416793
                    ],
                    [
                        11.5808742,
                        48.1415866
                    ],
                    [
                        11.5808844,
                        48.1416098
                    ],
                    [
                        11.5811294,
                        48.141562
                    ],
                    [
                        11.5810472,
                        48.1413724
                    ],
                    [
                        11.5810202,
                        48.1413102
                    ],
                    [
                        11.5807705,
                        48.1413584
                    ],
                    [
                        11.5807829,
                        48.1413856
                    ],
                    [
                        11.5805675,
                        48.1414292
                    ],
                    [
                        11.5804805,
                        48.1412353
                    ],
                    [
                        11.5804711,
                        48.1412137
                    ],
                    [
                        11.5804637,
                        48.1411967
                    ],
                    [
                        11.5804332,
                        48.1411249
                    ],
                    [
                        11.580365,
                        48.1409672
                    ],
                    [
                        11.5801161,
                        48.1410123
                    ]
                ]
            ]
        },
        "points_university_Fakultät für Geowissenschaften_9130196630": {
            "type": "Point",
            "coordinates": [
                11.5643966,
                48.1475003
            ]
        },
        "points_university_Hochschule und Nachhaltigkeit Bayern Hochschule München_3929291567": {
            "type": "Point",
            "coordinates": [
                11.5523631,
                48.1531606
            ]
        },
        "points_university_Technische Universität München / Modelierung Räumlicher Mobilität_5772457341": {
            "type": "Point",
            "coordinates": [
                11.5622953,
                48.1478107
            ]
        },
        "land_university_Akademie der Bildenden Künste München_263618162": {
            "type": "Polygon",
            "coordinates": [
                [
                    [
                        11.5780068,
                        48.1531959
                    ],
                    [
                        11.5781201,
                        48.1533664
                    ],
                    [
                        11.5781819,
                        48.15346
                    ],
                    [
                        11.5783684,
                        48.1537412
                    ],
                    [
                        11.5784055,
                        48.1537929
                    ],
                    [
                        11.5790617,
                        48.1536419
                    ],
                    [
                        11.5790947,
                        48.15371
                    ],
                    [
                        11.580099,
                        48.1534967
                    ],
                    [
                        11.5801378,
                        48.1535405
                    ],
                    [
                        11.5802229,
                        48.1535682
                    ],
                    [
                        11.5803267,
                        48.1535771
                    ],
                    [
                        11.5804639,
                        48.1535592
                    ],
                    [
                        11.5806079,
                        48.153519
                    ],
                    [
                        11.5806623,
                        48.1534927
                    ],
                    [
                        11.5807018,
                        48.1534598
                    ],
                    [
                        11.5807178,
                        48.153417
                    ],
                    [
                        11.5807218,
                        48.1533694
                    ],
                    [
                        11.5820749,
                        48.1530893
                    ],
                    [
                        11.5820571,
                        48.1530492
                    ],
                    [
                        11.5820129,
                        48.1529602
                    ],
                    [
                        11.5818136,
                        48.1525203
                    ],
                    [
                        11.5818076,
                        48.152509
                    ],
                    [
                        11.5817546,
                        48.1523955
                    ],
                    [
                        11.5789378,
                        48.1529929
                    ],
                    [
                        11.5780068,
                        48.1531959
                    ]
                ]
            ]
        },
        "points_university_Institut für Bayerische Geschichte_10813000251": {
            "type": "Point",
            "coordinates": [
                11.579695,
                48.1464292
            ]
        },
        "points_restaurant_VitaminToGo_442680130": {
            "type": "Point",
            "coordinates": [
                11.5528887,
                48.1545285
            ]
        },
        "points_restaurant_Aloha Poke_5493206175": {
            "type": "Point",
            "coordinates": [
                11.5770186,
                48.1516083
            ]
        },
        "points_restaurant_SAM Sushi and Meat_935378572": {
            "type": "Point",
            "coordinates": [
                11.5764038,
                48.1475382
            ]
        },
        "points_restaurant_Spatenhaus an der Oper_863560075": {
            "type": "Point",
            "coordinates": [
                11.5773071,
                48.1398289
            ]
        },
        "points_restaurant_Steinheil Sechzehn_264014310": {
            "type": "Point",
            "coordinates": [
                11.5642279,
                48.1498533
            ]
        },
        "points_restaurant_Hamburgerei_2876254096": {
            "type": "Point",
            "coordinates": [
                11.5609976,
                48.1468293
            ]
        },
        "points_restaurant_The Italian Shot_8262909771": {
            "type": "Point",
            "coordinates": [
                11.5751623,
                48.1481527
            ]
        },
        "points_restaurant_Türkenhof_388440473": {
            "type": "Point",
            "coordinates": [
                11.576831,
                48.1513715
            ]
        },
        "points_restaurant_La Stella_432654032": {
            "type": "Point",
            "coordinates": [
                11.5761047,
                48.1564675
            ]
        },
        "points_restaurant_San Benno_558624036": {
            "type": "Point",
            "coordinates": [
                11.551718,
                48.1509528
            ]
        },
        "points_restaurant_Frank_8947235617": {
            "type": "Point",
            "coordinates": [
                11.5778172,
                48.1416227
            ]
        },
        "points_restaurant_Takumi Chicken&Veggie_3290551024": {
            "type": "Point",
            "coordinates": [
                11.5615664,
                48.1492734
            ]
        },
        "points_restaurant_Kara Kazan_10168873107": {
            "type": "Point",
            "coordinates": [
                11.578908,
                48.152245
            ]
        },
        "points_restaurant_Komitee_4470359353": {
            "type": "Point",
            "coordinates": [
                11.5650402,
                48.1485743
            ]
        },
        "points_restaurant_Georgenhof_362109054": {
            "type": "Point",
            "coordinates": [
                11.5790431,
                48.1548508
            ]
        },
        "points_restaurant_TschungKing Hotpot_1573738309": {
            "type": "Point",
            "coordinates": [
                11.5678962,
                48.1524254
            ]
        },
        "points_restaurant_Hans im Glück_2951261596": {
            "type": "Point",
            "coordinates": [
                11.5770613,
                48.1522081
            ]
        },
        "points_restaurant_Thai Krung Si_1383044774": {
            "type": "Point",
            "coordinates": [
                11.5854085,
                48.1549628
            ]
        },
        "points_restaurant_Che Bordello_329088197": {
            "type": "Point",
            "coordinates": [
                11.5760909,
                48.1501312
            ]
        },
        "points_restaurant_Pizza Verde_8589409253": {
            "type": "Point",
            "coordinates": [
                11.5780049,
                48.1576194
            ]
        },
        "points_restaurant_Levilevi_5465258222": {
            "type": "Point",
            "coordinates": [
                11.5777012,
                48.1494018
            ]
        },
        "points_restaurant_Bar Comercial_617120615": {
            "type": "Point",
            "coordinates": [
                11.5762933,
                48.1410558
            ]
        },
        "points_restaurant_Sparkling Bistro_6849591319": {
            "type": "Point",
            "coordinates": [
                11.5778172,
                48.1518153
            ]
        },
        "points_restaurant_Sesam öffne dich_682198307": {
            "type": "Point",
            "coordinates": [
                11.5771706,
                48.1480937
            ]
        },
        "points_restaurant_Amistad_1406084149": {
            "type": "Point",
            "coordinates": [
                11.5760761,
                48.1549198
            ]
        },
        "points_restaurant_Frida_6389119859": {
            "type": "Point",
            "coordinates": [
                11.5648814,
                48.1496692
            ]
        },
        "points_restaurant_Bei Mario_667535961": {
            "type": "Point",
            "coordinates": [
                11.5782839,
                48.1521395
            ]
        },
        "points_restaurant_Rossini_442683444": {
            "type": "Point",
            "coordinates": [
                11.5767451,
                48.1512286
            ]
        },
        "points_restaurant_Luise_1567316487": {
            "type": "Point",
            "coordinates": [
                11.5661798,
                48.149735
            ]
        },
        "points_restaurant_Gratitude_2587611423": {
            "type": "Point",
            "coordinates": [
                11.5761256,
                48.1507814
            ]
        },
        "points_restaurant_Maex41_1573753301": {
            "type": "Point",
            "coordinates": [
                11.5777647,
                48.149614
            ]
        },
        "points_restaurant_Victorian House_7203712186": {
            "type": "Point",
            "coordinates": [
                11.576404,
                48.141004
            ]
        },
        "points_restaurant_Max-Emanuel-Brauerei_390080594": {
            "type": "Point",
            "coordinates": [
                11.5764759,
                48.1527135
            ]
        },
        "points_restaurant_veggiepoint_5768792663": {
            "type": "Point",
            "coordinates": [
                11.5764808,
                48.1500154
            ]
        },
        "points_restaurant_Hansa-Garten_4946117187": {
            "type": "Point",
            "coordinates": [
                11.5619825,
                48.145672
            ]
        },
        "points_restaurant_Driveri_1014404060": {
            "type": "Point",
            "coordinates": [
                11.5615815,
                48.1473855
            ]
        },
        "points_restaurant_Nasca_1567305489": {
            "type": "Point",
            "coordinates": [
                11.5654952,
                48.1506254
            ]
        },
        "points_restaurant_Masquerade_1397436862": {
            "type": "Point",
            "coordinates": [
                11.58387,
                48.15708
            ]
        },
        "points_restaurant_Zento_9393341025": {
            "type": "Point",
            "coordinates": [
                11.5779008,
                48.1453645
            ]
        },
        "points_restaurant_Taste My Burger_319258996": {
            "type": "Point",
            "coordinates": [
                11.5604518,
                48.1535789
            ]
        },
        "points_restaurant_Briciole_1804145207": {
            "type": "Point",
            "coordinates": [
                11.5763359,
                48.1459224
            ]
        },
        "points_restaurant_Aquamarina_1039009514": {
            "type": "Point",
            "coordinates": [
                11.5528143,
                48.148155
            ]
        },
        "points_restaurant_Mentor’s Pizza_2336088851": {
            "type": "Point",
            "coordinates": [
                11.5632346,
                48.1490847
            ]
        },
        "points_restaurant_Viethaus_1137876901": {
            "type": "Point",
            "coordinates": [
                11.5608391,
                48.154675
            ]
        },
        "points_restaurant_Supernova_390080410": {
            "type": "Point",
            "coordinates": [
                11.5771713,
                48.1524846
            ]
        },
        "points_restaurant_ELLA_2261568753": {
            "type": "Point",
            "coordinates": [
                11.5633122,
                48.1466458
            ]
        },
        "points_restaurant_L'Osteria_442683443": {
            "type": "Point",
            "coordinates": [
                11.5840263,
                48.1552055
            ]
        },
        "points_restaurant_Ali Bey_2440534886": {
            "type": "Point",
            "coordinates": [
                11.5744993,
                48.155289
            ]
        },
        "points_restaurant_Libanon (Imbiss und Obstgeschäft)_1380508629": {
            "type": "Point",
            "coordinates": [
                11.5854436,
                48.1550838
            ]
        },
        "points_restaurant_Sarovar_935378547": {
            "type": "Point",
            "coordinates": [
                11.577431,
                48.1472974
            ]
        },
        "points_restaurant_Bami House 1976_5522872219": {
            "type": "Point",
            "coordinates": [
                11.5773663,
                48.1499693
            ]
        },
        "points_restaurant_Rila_1475563028": {
            "type": "Point",
            "coordinates": [
                11.5835205,
                48.1489253
            ]
        },
        "points_restaurant_Sushi Plus_6402504463": {
            "type": "Point",
            "coordinates": [
                11.5676734,
                48.152523
            ]
        },
        "points_restaurant_Kasino_617127201": {
            "type": "Point",
            "coordinates": [
                11.5796948,
                48.1447154
            ]
        },
        "points_restaurant_Fuyuan_5489630514": {
            "type": "Point",
            "coordinates": [
                11.5610973,
                48.1465592
            ]
        },
        "points_restaurant_AKUO_1737365973": {
            "type": "Point",
            "coordinates": [
                11.5788549,
                48.1522599
            ]
        },
        "points_restaurant_Mamma Bao_10555181507": {
            "type": "Point",
            "coordinates": [
                11.5617619,
                48.1476652
            ]
        },
        "points_restaurant_Osteria Italiana_1573738306": {
            "type": "Point",
            "coordinates": [
                11.5721543,
                48.1514609
            ]
        },
        "points_restaurant_Lubu Uni_679059428": {
            "type": "Point",
            "coordinates": [
                11.5656632,
                48.1488865
            ]
        },
        "points_restaurant_Cyclo_332790692": {
            "type": "Point",
            "coordinates": [
                11.5723733,
                48.1489423
            ]
        },
        "points_restaurant_Trattoria Al Torchio_976966533": {
            "type": "Point",
            "coordinates": [
                11.577718,
                48.1489717
            ]
        },
        "points_restaurant_Heygreens_609056934": {
            "type": "Point",
            "coordinates": [
                11.5624798,
                48.1481843
            ]
        },
        "points_restaurant_Chilli Asia_6342884439": {
            "type": "Point",
            "coordinates": [
                11.5542777,
                48.1536731
            ]
        },
        "points_restaurant_Tenmaya_1567316525": {
            "type": "Point",
            "coordinates": [
                11.5665156,
                48.1503583
            ]
        },
        "points_restaurant_Wing Nation_415219747": {
            "type": "Point",
            "coordinates": [
                11.5654077,
                48.149511
            ]
        },
        "points_restaurant_Amigos_4448441088": {
            "type": "Point",
            "coordinates": [
                11.554073,
                48.1538342
            ]
        },
        "points_restaurant_Bar Tapas_1431066135": {
            "type": "Point",
            "coordinates": [
                11.5794503,
                48.1520502
            ]
        },
        "points_restaurant_BLOCK HOUSE_315969679": {
            "type": "Point",
            "coordinates": [
                11.5843896,
                48.1558613
            ]
        },
        "points_restaurant_Bo Oi_4097226360": {
            "type": "Point",
            "coordinates": [
                11.5648208,
                48.1508565
            ]
        },
        "points_restaurant_89Anju_10095813702": {
            "type": "Point",
            "coordinates": [
                11.5659452,
                48.1493966
            ]
        },
        "points_restaurant_Baal_544399154": {
            "type": "Point",
            "coordinates": [
                11.5545452,
                48.1515489
            ]
        },
        "points_restaurant_the spice bazaar_706103350": {
            "type": "Point",
            "coordinates": [
                11.5820237,
                48.140764
            ]
        },
        "points_restaurant_Peter Pane_315969678": {
            "type": "Point",
            "coordinates": [
                11.5840719,
                48.1553201
            ]
        },
        "points_restaurant_Ivans_442683440": {
            "type": "Point",
            "coordinates": [
                11.5848953,
                48.1570593
            ]
        },
        "points_restaurant_Deeba_426878876": {
            "type": "Point",
            "coordinates": [
                11.5722843,
                48.1492358
            ]
        },
        "points_restaurant_Han She_1394732285": {
            "type": "Point",
            "coordinates": [
                11.5873099,
                48.1532333
            ]
        },
        "points_restaurant_Katopazzo_4534215934": {
            "type": "Point",
            "coordinates": [
                11.5789863,
                48.1514
            ]
        },
        "points_restaurant_Khana Khazana_682198296": {
            "type": "Point",
            "coordinates": [
                11.5738876,
                48.1485122
            ]
        },
        "points_restaurant_Jawz_1377919563": {
            "type": "Point",
            "coordinates": [
                11.5848698,
                48.1574113
            ]
        },
        "points_restaurant_Salzkruste_362104085": {
            "type": "Point",
            "coordinates": [
                11.5748204,
                48.1551979
            ]
        },
        "points_restaurant_Shiva_1567305474": {
            "type": "Point",
            "coordinates": [
                11.5652377,
                48.152269
            ]
        },
        "points_restaurant_Halali_271231278": {
            "type": "Point",
            "coordinates": [
                11.5818112,
                48.1456151
            ]
        },
        "points_restaurant_Limoni_682198314": {
            "type": "Point",
            "coordinates": [
                11.5775756,
                48.1487065
            ]
        },
        "points_restaurant_Kun-Tuk_976966541": {
            "type": "Point",
            "coordinates": [
                11.5788291,
                48.1511325
            ]
        },
        "points_restaurant_Rosso Pizza_2292435619": {
            "type": "Point",
            "coordinates": [
                11.5773863,
                48.1489089
            ]
        },
        "points_restaurant_Il Grappolo_616690544": {
            "type": "Point",
            "coordinates": [
                11.5792297,
                48.1521316
            ]
        },
        "points_restaurant_Sesam Falafel_370743432": {
            "type": "Point",
            "coordinates": [
                11.5839176,
                48.1571907
            ]
        },
        "points_restaurant_Levante - Mezze Bar & Restaurant_427041660": {
            "type": "Point",
            "coordinates": [
                11.5759042,
                48.1575225
            ]
        },
        "points_restaurant_Anh Quan_6466450287": {
            "type": "Point",
            "coordinates": [
                11.5764035,
                48.1541984
            ]
        },
        "points_restaurant_Ha Noi Pho_6260692009": {
            "type": "Point",
            "coordinates": [
                11.5849981,
                48.1537334
            ]
        },
        "points_restaurant_The Pham's_274380373": {
            "type": "Point",
            "coordinates": [
                11.5752813,
                48.156733
            ]
        },
        "points_restaurant_Tira tardi ristorante und Weinhandlung_432654030": {
            "type": "Point",
            "coordinates": [
                11.5756832,
                48.1570001
            ]
        },
        "points_restaurant_ROSE Wein-Brasserie_432654035": {
            "type": "Point",
            "coordinates": [
                11.576196,
                48.1559597
            ]
        },
        "points_restaurant_Koya_1678033231": {
            "type": "Point",
            "coordinates": [
                11.5547929,
                48.1532464
            ]
        },
        "points_restaurant_Conti Restaurant_990261494": {
            "type": "Point",
            "coordinates": [
                11.5700183,
                48.143073
            ]
        },
        "points_restaurant_Shagun Indisches Spezialitäten Restaurant_4137361890": {
            "type": "Point",
            "coordinates": [
                11.5615372,
                48.1495261
            ]
        },
        "points_restaurant_Mr. Pancake_4321218569": {
            "type": "Point",
            "coordinates": [
                11.563784,
                48.1489142
            ]
        },
        "points_restaurant_Zum Koreaner_1573753316": {
            "type": "Point",
            "coordinates": [
                11.5775288,
                48.1492981
            ]
        },
        "points_restaurant_Studentenwerk Mensa_10076369822": {
            "type": "Point",
            "coordinates": [
                11.5523822,
                48.1539257
            ]
        },
        "points_restaurant_Hunsinger_725632777": {
            "type": "Point",
            "coordinates": [
                11.5711842,
                48.1495463
            ]
        },
        "points_restaurant_Bento Box_442683441": {
            "type": "Point",
            "coordinates": [
                11.5847688,
                48.1567761
            ]
        },
        "points_restaurant_Ivan's Café Bar Restaurant_2524384517": {
            "type": "Point",
            "coordinates": [
                11.5827189,
                48.1546401
            ]
        },
        "points_restaurant_Sansaro_4978044321": {
            "type": "Point",
            "coordinates": [
                11.578051,
                48.1517931
            ]
        },
        "points_restaurant_yā | The Mandarin Room_1788814868": {
            "type": "Point",
            "coordinates": [
                11.5848039,
                48.1568321
            ]
        },
        "points_restaurant_Theresa Grill_1813648597": {
            "type": "Point",
            "coordinates": [
                11.5754646,
                48.1478487
            ]
        },
        "points_restaurant_Mama's Küche Streetfood_4322460004": {
            "type": "Point",
            "coordinates": [
                11.5529738,
                48.1544547
            ]
        },
        "points_restaurant_Sushi Xeng_4217579499": {
            "type": "Point",
            "coordinates": [
                11.5624648,
                48.1481596
            ]
        },
        "points_restaurant_Brasserie Tresznjewski_332790691": {
            "type": "Point",
            "coordinates": [
                11.5721485,
                48.1490073
            ]
        },
        "points_restaurant_Palmtreeclub_10263536033": {
            "type": "Point",
            "coordinates": [
                11.5622729,
                48.1484766
            ]
        },
        "points_restaurant_Pfälzer Residenz Weinstube_2288027737": {
            "type": "Point",
            "coordinates": [
                11.577857,
                48.1417806
            ]
        },
        "points_restaurant_Brothers_432654034": {
            "type": "Point",
            "coordinates": [
                11.5758165,
                48.1562516
            ]
        },
        "points_restaurant_LeDu - Happy Dumplings_2595562246": {
            "type": "Point",
            "coordinates": [
                11.5774607,
                48.1474943
            ]
        },
        "points_restaurant_Tambosi Restaurant_5398577133": {
            "type": "Point",
            "coordinates": [
                11.5781568,
                48.1428686
            ]
        },
        "points_restaurant_Asaka Running Sushi_682198317": {
            "type": "Point",
            "coordinates": [
                11.5771241,
                48.1486014
            ]
        },
        "points_restaurant_Viet-Thai Bistro_3722630197": {
            "type": "Point",
            "coordinates": [
                11.5762713,
                48.1471997
            ]
        },
        "points_restaurant_La Nonna_9021654317": {
            "type": "Point",
            "coordinates": [
                11.5771857,
                48.149827
            ]
        },
        "points_restaurant_King Masala_4978366182": {
            "type": "Point",
            "coordinates": [
                11.5625431,
                48.1482908
            ]
        },
        "points_restaurant_Gyoza Bar_2335067217": {
            "type": "Point",
            "coordinates": [
                11.5624044,
                48.1486806
            ]
        },
        "points_restaurant_Atzinger_390079406": {
            "type": "Point",
            "coordinates": [
                11.5781057,
                48.1495489
            ]
        },
        "points_restaurant_Los Faroles_452068324": {
            "type": "Point",
            "coordinates": [
                11.5754427,
                48.155631
            ]
        },
        "points_restaurant_Kushi-Tei of Tokyo_649286265": {
            "type": "Point",
            "coordinates": [
                11.5704853,
                48.1517245
            ]
        },
        "points_restaurant_Neo-Brasserie Hoiz_2548291590": {
            "type": "Point",
            "coordinates": [
                11.5676862,
                48.1429175
            ]
        }
    }

    // var colors = ['red', 'blue', 'green', 'purple']; // Colors for buttons
    // var index = 0;
    // var layerControl = document.getElementById('controls');
    // var toggle = document.getElementById('toggle');
    var currentIndex = 0;
    const usedElements = [];

    const color_list=['#756bb1',
        '#3182bd',
        '#e78ac3',
        '#31a354',
        '#6baed6',
        '#74c476',
        '#fb8072',
        '#fdb462',
        '#bc80bd',
        '#8da0cb',
        '#fdd0a2',
        '#66c2a5',
        '#e6550d',
        '#fdae6b',
        '#a1d99b',
        '#636363',
        '#ffd92f',
        '#9ecae1',
        '#b3b3b3']
    var color_dict = {}; // 存储标签与颜色的映射
    let target_labels=[
        'land_university',

    ]
    var allControls = [];
    function createCustomClusterIcon(cluster) {
        var childMarkers = cluster.getAllChildMarkers();
        var color = childMarkers[0].options.color; // 读取自定义颜色属性
        return L.divIcon({
            html: '<div class="custom-cluster-icon" style="background-color:' + color + ';">' + cluster.getChildCount() + '</div>',
            className: 'custom-cluster',
            iconSize: [40, 40]
        });
    }
    // 示例列表
    var markers = L.markerClusterGroup({
        iconCreateFunction: createCustomClusterIcon
    });



    function updateMapDataAndFitBounds(map,geojson,target_labels=[]){
        console.log(target_labels)
        if (window.geoJsonLayer) {
            window.geoJsonLayer.clearLayers(); // 移除之前的图层数据
        } else {
            window.geoJsonLayer = L.geoJSON().addTo(map); // 初始化geoJsonLayer

        }
        removeAllControls()
        function removeAllControls() {
            allControls.forEach(function(control) {
                map.removeControl(control);
            });
            allControls = []; // 清空数组
        }

        function getRandomColor(label) {
            const label_belong =label.split("_").slice(0, 2).join("_");
            // const lastIndex = label.lastIndexOf("_"); // 找到最后一个下划线的索引
            // const label_belong = label.substring(0, lastIndex);
            if (label_belong in color_dict){
                return color_dict[label_belong]
            }
            else
            {
                const color =picker.getNextElement()
                console.log(color,label_belong)
                color_dict[label_belong]=color
                return color;
            }


        }
        function createSequentialPicker(array) {
            if (!Array.isArray(array) || array.length === 0) {
                throw new Error("Array must be a non-empty array.");
            }
            function getNextElement() {
                // 获取当前索引的元素
                const element = array[currentIndex];

                // 更新索引，如果到达数组末尾则重置为0
                currentIndex = (currentIndex + 1) % array.length;

                // 记录已经抽取过的元素
                usedElements.push(element);

                return element;
            }

            function getUsedElements() {
                return usedElements;
            }

            return {
                getNextElement,
                getUsedElements
            };
        }
        const picker = createSequentialPicker(color_list);
        function create_container_list(labels_ori,div){
            var blocks = {};
            let labels=[]
            let colors_btn={}

            const keys = Object.keys(labels_ori);

            // 获取第一个元素的键和值
            const firstKey = keys[0];
            const firstValue = labels_ori[firstKey];

            // 创建一个新的对象，并将第一个元素添加进去
            const sortedObj = { [firstKey]: firstValue };

            // 移除第一个元素的键
            keys.shift();

            // 对剩余的键进行排序
            keys.sort();

            // 将排序后的元素依次加入新对象
            keys.forEach(key => {
                sortedObj[key] = labels_ori[key];
            });
            // console.log(labels_ori)

            // console.log(sortedObj)
            for (var label in sortedObj) {
                (function(label) {
                    let color=labels_ori[label]['color']
                    colors_btn[label]=color
                    let layer=labels_ori[label]['layer']
                    if (!labels[label]) {

                        // 获取第一个下划线前面的内容作为block的key
                        var blockKey = label.includes('_') ? "💾 "+label.split('_')[0] : '🗺️ Region';


                        if (!blocks[blockKey]) {
                            // 如果blockKey不存在，创建一个新的block
                            blocks[blockKey] = {
                                button: L.DomUtil.create('button', 'toggle-block-btn', div),
                                labels: {}
                            };
                            blocks[blockKey].button.style.backgroundColor = 'grey';
                            blocks[blockKey].button.textContent = blockKey;
                            blocks[blockKey].button.classList.add('block-button');
                            blocks[blockKey].button.onclick = function() {
                                var blockBtn = blocks[blockKey].button;
                                var labelsInBlock = blocks[blockKey].labels;
                                var allActive = true;

                                for (var lbl in labelsInBlock) {
                                    if (!map.hasLayer(labelsInBlock[lbl].layers[0])) {
                                        allActive = false;
                                        break;
                                    }
                                }

                                if (allActive) {
                                    for ( lbl in labelsInBlock) {
                                        labelsInBlock[lbl].layers.forEach(function(layer) {
                                            map.removeLayer(layer);
                                        });
                                        labelsInBlock[lbl].button.style.backgroundColor = 'black';
                                    }
                                } else {
                                    for ( lbl in labelsInBlock) {
                                        labelsInBlock[lbl].layers.forEach(function(layer) {
                                            map.addLayer(layer);
                                        });
                                        // console.log(lbl)
                                        // console.log(labelsInBlock[lbl])
                                        // console.log(colors[lbl])
                                        labelsInBlock[lbl].button.style.backgroundColor = colors_btn[lbl];
                                    }
                                }
                            };
                        }

                        // 创建一个新的label按钮
                        labels[label] = {
                            button: L.DomUtil.create('button', 'toggle-btn', div),
                            layers: []
                        };

                        labels[label].button.style.backgroundColor = color;

                        labels[label].button.textContent = target_labels.includes(label) ? label + " (target)" : label;
                        labels[label].button.onclick = function() {
                            var btn = labels[label].button;
                            var layers = labels[label].layers;
                            if (map.hasLayer(layers[0])) {
                                layers.forEach(function(layer) {
                                    map.removeLayer(layer);
                                });
                                btn.style.backgroundColor = 'black';
                            } else {
                                layers.forEach(function(layer) {
                                    map.addLayer(layer);
                                });

                                btn.style.backgroundColor = color;
                            }
                        };

                        // 将当前label添加到对应的block中
                        blocks[blockKey].labels[label] = labels[label];
                        // index++;
                    }
                    labels[label].layers=layer;
                })(label);
            }

        }
        var controls = L.control({position: 'topleft'});
        function push_obj(obj1, obj2) {
            Object.assign(obj1, obj2);
        }

        controls.onAdd = function(map) {
            var div = L.DomUtil.create('div', 'leaflet-control-custom');
            var labels = {}; // to keep track of unique labels


            for (var key in geojson) {
                (function(key) {
                    var parts = key.split('_');
                    const lastIndex = key.lastIndexOf("_"); // 找到最后一个下划线的索引

                    var label = parts.length > 2 ? parts.slice(0, 2).join('_') : key;// use the second element as label or key if not present
                    var label_belong = key.substring(0, lastIndex); // use the second element as label or key if not present

                    var color = getRandomColor(key);
                    var feature = geojson[key];
                    var layerGroup = L.featureGroup();
                    var layerOptions = {
                        onEachFeature: function(feature, layer) {
                            layer.bindPopup(label_belong);
                            if (target_labels.includes(label)){
                                if (feature.type === 'Point') {
                                    latlng = L.latLng(feature.coordinates[1], feature.coordinates[0]);
                                } else {
                                    latlng = L.latLngBounds(layer.getBounds()).getCenter();
                                }

                                const layer_target=L.marker(latlng, {
                                    icon: L.divIcon({
                                        className: 'custom-div-icon',
                                        html:  `
            <div style="
                position: relative;
                width: 20px;
                height: 30px;
                background-color: transparent;">
                <div style="
                    width: 20px;
                    height: 20px;
                    background-color: ${color};
                    border: 2px solid white;
                    border-radius: 50%;
                    position: absolute;
                    top: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    box-shadow: 0 0 0 2px ${color};">
                </div>

            </div>
        `,
                                        iconSize: [20, 20]
                                    }),
                                    color: color // 将颜色作为自定义属性附加到标记上
                                })
                                markers.addLayer(layer_target)
                                layerGroup.addLayer(markers)
                                layer_target.bindPopup(label_belong);

                            }

                        }
                    };




                    if (feature.type === "Point") {
                        push_obj(layerOptions, {

                            pointToLayer: function (feature, latlng) {
                                return L.circleMarker(latlng, {
                                    radius: 5, // 调整半径大小以改变点的大小
                                    fillColor: color, //
                                    color:color, //
                                    weight: 1,
                                    opacity: 1,
                                    fillOpacity: 0.8
                                });
                            },

                        });
                    }else {
                        push_obj(layerOptions, {

                            style: function(feature) {
                                return {color: color, weight: 2};
                            }
                        })
                    }
                    var layer = L.geoJSON(feature, layerOptions)
                    layerGroup.addLayer(layer)
                    layerGroup.addTo(window.geoJsonLayer);
                    if     ( !labels[label])  {
                        labels[label]={
                            color: color,
                            layer: [layerGroup]
                        }

                    }else {
                        labels[label]['layer'].push(layerGroup)
                    };







                })(key);
            }
            // console.log(labels)
            create_container_list(labels,div)
            return div;
        };
        controls.addTo(map);
        allControls.push(controls)

        // Create custom control for the toggle button
        var toggleControl = L.control({position: 'topleft'});
        toggleControl.onAdd = function(map) {
            var button = L.DomUtil.create('button', 'leaflet-control-toggle');
            // var rect = button.getBoundingClientRect();
            // console.log('控件的位置:', rect);
            // console.log(button.style.top)
            button.innerHTML = '⬆️';

            button.onclick = function() {
                var controlsDiv = document.querySelector('.leaflet-control-custom');
                const windowHeight = window.innerHeight;
                const controlsHeight = controlsDiv.offsetHeight;
                if (controlsDiv.style.top === '50px'||controlsDiv.style.top === '') {
                    controlsDiv.style.top = -controlsHeight+'px';// Adjust based on your actual controls height
                    button.innerHTML = '⬇️';
                    // console.log(controlsHeight)
                } else {
                    controlsDiv.style.top = '50px';
                    button.innerHTML = '⬆️';
                }
            };
            return button;
        };
        toggleControl.addTo(map);
        allControls.push(toggleControl)

        // var controlInstance = control.addTo(map);

        // Toggle button for collapsing control panel
        // var toggle = document.getElementById('toggle');


        var expandControl = L.control({position: 'bottomleft'});

        expandControl.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'leaflet-control-expand');
            div.innerHTML = '<button id="expandBtn" style="background: #fff; border: none; border-radius: 4px; box-shadow: 0 1px 5px rgba(0,0,0,0.3); padding: 8px 15px; cursor: pointer;">Expand</button>';
            return div;
        };


        expandControl.addTo(map);
        allControls.push(expandControl)
        var mapElement = document.getElementById('map-container');
        var expandBtn = document.getElementById('expandBtn');

        expandBtn.onclick = function() {
            if (mapElement.classList.contains('fullscreen')) {
                mapElement.classList.remove('fullscreen');
                expandBtn.textContent = 'Expand';
            } else {
                mapElement.classList.add('fullscreen');
                expandBtn.textContent = 'Shrink';
            }
            map.invalidateSize(); // Leaflet needs to adjust to new container size
        };

        // Listen for escape key to shrink map if in fullscreen
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape" && mapElement.classList.contains('fullscreen')) {
                mapElement.classList.remove('fullscreen');
                expandBtn.textContent = 'Expand';
                map.invalidateSize(); // Adjust map after resizing
            }
        });
        try {
            map.fitBounds(window.geoJsonLayer.getBounds());
        } catch (error) {
            console.log('Error fitting bounds:', window.geoJsonLayer.getBounds());
        }

    }

    // updateMapDataAndFitBounds(map,geojsons,target_labels)
    updateMapDataAndFitBounds(map,geojsons,target_labels)
</script>
</body>
</html>
